<!-- index.wxml -->
<wxs module="m1">
  var getMin = function(duration) {
    return parseInt(duration/60)
  }
  module.exports.getMin = getMin;
</wxs>
<page-meta page-style="">
  <navigation-bar back extClass="transparent" loading="{{false}}" title="{{exhibitionInfo.name}}" color="white" background="#FFF" style="text-align: center;"></navigation-bar>
  <view class="player-area">
    <player-comp bindClickPlayerComp="handleClickPlayerComp"></player-comp>
  </view>
  <view class="page-exhibition-detail">
    <scroll-view class="scroll-view_H" scroll-y="true" show-scrollbar="{{false}}" enhanced="{{true}}" bindscroll="scroll">
      <view class="s-content">
      <view class="museum-info">
        <image src="{{exhibitionInfo.image_url}}" class="museum-img" mode="aspectFill" />
        <view class="museum-text-group">
          <view class="title">
            <span class="title-name">{{exhibitionInfo.name}}</span>
            <view class="zhanlan-type">{{exhibitionInfo.short === 1 ? '临时展': '常设展'}}</view>
          </view>
          <image bindtap="handleClickPlayIcon" src="/static/images/play1.png" class="play-icon" mode="aspectFill" />
          <view class="desc">{{exhibitionInfo.description}}</view>
          <view class="line"></view>
          <view class="group-two">
            <view class="address text-flex">
              <image src="/static/images/dingwei-gray.png" class="museum-icon" mode="aspectFill" />
              {{exhibitionInfo.address}}
            </view>
            <view class="open-date text-flex">
              <image src="/static/images/date-gray.png" class="museum-icon" mode="aspectFill" />
              开放时间：{{exhibitionInfo.opendate}}
            </view>
          </view>
        </view>
      </view>
      <view class="exhibition-intro">
        <view class="title-line">
          <view class="title">
            <image class="title-img" src="/static/images/dashline1.png" mode="aspectFix" />
            <view class="title-name">展览介绍</view>
          </view>
        </view>
        <view class="intro-content">
          <view class="{{isShowIntro ? 'text-whole': 'text'}}">{{exhibitionInfo.intro}}</view>
          <view class="img-wrapper" bindtap="handleClickIntro">
            <image class="arrow-img {{isShowIntro ? 'img-rotate': ''}}" src="/static/images/arrow-bottom.png" mode="aspectFix" />
          </view>
        </view>
        <view class="ticket-group">
          <view>
            <text class="title">展览票</text>
            <text class="tehui">{{exhibitionInfo.ticket_price === 0? '免费' : ''}}</text>
          </view>
          <view class="price">¥{{exhibitionInfo.ticket_price}}</view>
          <!-- <view class="price11">{{exhibitionInfo.ticket_price}}</view> -->
        </view>
      </view>
      <view class="jiangjie-area">
        <view class="title-line">
          <view class="title">
            <view class="title-name">导览讲解</view>
            <image class="title-img" src="/static/images/dashline1.png" mode="aspectFix" />
          </view>
        </view>
        <view class="jiangjie-card">
          <block wx:for="{{narrationList}}" wx:key="id">
            <view class="card-group">
              <image class="card-bg" src="/static/images/btn2.png" mode="aspectFix" />
              <view class="card-content-line-one">
                <view class="first-area">
                  <image class="avatar" src="{{item.url}}" mode="aspectFix" />
                  <text class="name">{{item.description ? item.description : '博物观展独家讲解'}}</text>
                  <!-- <text class="fenge">|</text>
              <text class="title">{{item.name}}</text> -->
                </view>
                <view class="sec-area">
                  <view class="price">
                    <text class="unit">¥</text>
                    {{item.price}}
                  </view>
                  <view class="time">
                    <text class="per">/</text>
                    {{m1.getMin(item.duration)}}分钟
                  </view>
                </view>
              </view>
              <view class="card-content-line-two">
                <view class="type">{{item.name}}</view>
                <view class="btn-group" data-idx="{{item.id}}" bindtap="handleClickJiangjie">
                  <image src="/static/images/btn-selected.png" class="loc-btn" mode="aspectFix" />
                  <view class="loc-name white">播放</view>
                </view>
              </view>
            </view>
          </block>
        </view>
      </view>
      <view class="score-card-area">
        <score-card></score-card>
      </view>
      <view class="comment-list-area">
        <comment-list></comment-list>
      </view>
      
      </view>
    </scroll-view>
  </view>
</page-meta>