<page-meta page-style="background: #E6E6E6">
  <navigation-bar
    title="{{navTitle}}"
    back="{{true}}"
    color="black"
    background="#E6E6E6"
    styleType="dark"
  ></navigation-bar>

  <view class="treature-detail-page">
    <scroll-view scroll-y="{{true}}" show-scrollbar="{{false}}" class="detail-scroll" >
      <view class="result-hero">
        <view class="result-title">{{item.name}}</view>
        <view class="result-image-wrap">
          <image class="result-image" src="{{displayImage}}" mode="aspectFit"></image>
          <view wx:if="{{bubbles.length}}" class="bubble-layer">
            <block wx:for="{{bubbles}}" wx:key="title">
              <view
                class="bubble-item bubble-item-{{index}}"
                bindtap="handleBubbleTap"
                data-index="{{index}}"
              >
                <view class="bubble-icon">{{item.emoji}}</view>
                <view class="bubble-text">{{item.title}}</view>
              </view>
            </block>
          </view>
        </view>
        
        <!-- <view wx:if="{{ranking.title}}" class="result-subtitle">{{ranking.title}}</view>
        <view wx:if="{{item.rank_no}}" class="result-rank">第{{item.rank_no}}名</view> -->
      </view>

      <view wx:if="{{bubbleDetailVisible}}" class="bubble-detail-overlay">
        <view class="bubble-detail-mask" bindtap="closeBubbleDetail"></view>
        <view class="bubble-detail-sheet">
          <view class="bubble-detail-card">
            <view class="bubble-detail-close" bindtap="closeBubbleDetail">×</view>
            <view class="bubble-detail-title">
              {{bubbleDetailTitle || '正在生成问题详情...'}}
            </view>
            <view class="bubble-detail-text">
              {{bubbleDetailText || (bubbleDetailLoading ? '正在生成内容...' : '')}}
            </view>
          </view>
        </view>
      </view>

      <view wx:if="{{detailRows.length || item.description}}" class="result-section">
        <view class="title-group" style="background-image: url('https://bowudaoyu-public.oss-cn-beijing.aliyuncs.com/storage/user/image/mingpian_title.png')">
          <!-- <view class="section-title short">
            <text>文物名片</text>
          </view>
          <image
            class="section-title-border"
            src="/static/images/border.png"
            mode="scaleToFill"
          ></image> -->
        </view>
        <view class="content-group"  style="background-image: url('https://bowudaoyu-public.oss-cn-beijing.aliyuncs.com/storage/user/image/mingpian_bg.jpg')" >
          <view class="info-row" wx:for="{{detailRows}}" wx:key="label">
            <text class="info-label">{{item.label}}</text>
            <text class="info-value">{{item.value}}</text>
          </view>
          <view wx:if="{{item.description}}" class="info-desc">
            <text class="info-label">简介</text>
            <text class="info-value section-desc">{{item.description}}</text>
          </view>
        </view>
      </view>
    </scroll-view>
  </view>
  <custom-tab-bar></custom-tab-bar>
</page-meta>
