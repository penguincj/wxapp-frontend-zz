<!-- index.wxml -->
<page-meta page-style="">
<navigation-bar back styleType="dark" color="dark" loading="{{false}}" background="#FFF" title="{{museumInfo.name}}"></navigation-bar>
<view class="player-area">
<player-comp
  bindClickPlayerComp="handleClickPlayerComp"
></player-comp>
</view>
<scroll-view 
  scroll-y="{{true}}" 
  show-scrollbar="{{false}}" 
  enhanced="{{true}}"
  bindscrolltolower="handleScrolltolower"
  style="height: calc(100vh - 88px)">
<view class="page-museum-detail">
  <view class="museum-info">
    <image src="{{museumInfo.image_url}}" class="museum-img" mode="aspectFill" />
    <view class="museum-text-group">
      <view class="title">{{museumInfo.name}}</view>
      <view class="desc">{{museumInfo.description}}</view>
      <view class="btn-line" wx:if="{{showPosterBtn}}">
        <view class="btn btn-poster" bindtap="handleClickSharePoster">
          <image class="btn-image" src="/static/images/share1.png" mode="aspectFix" />
          <text class="cont">生成分享海报</text>
        </view>
      </view>
      <view class="line"></view>
      <view class="open-date text-flex">
          <image src="/static/images/date.png" class="museum-icon" mode="aspectFill" />
        {{museumInfo.opentime}}
      </view>
      <view class="price text-flex">
        <image src="/static/images/piao.png" class="museum-icon" mode="aspectFill" />
        门票价格：{{museumInfo.ticket_price}}/人（普通票）
      </view>
      <view class="address text-flex">
        <image src="/static/images/dingwei.png" class="museum-icon" mode="aspectFill" />
      {{museumInfo.address}}
      </view>
    </view>
  </view>
  <view class="swiper-unit-area" wx:if="{{listConfig.length}}">
    <swiper-unit2 list="{{listConfig}}" selectedId="{{topSwiperSelectIdx}}" bindChangeUnit="handleChangePannelId"></swiper-unit2>
  </view>
  <view class="unit-tab-pannel-area" wx:if="{{topSwiperSelectIdx === 2}}">
    <block wx:for="{{iconsConfig}}" wx:key="{{index}}">
      <view class="pannel-item" data-idx="{{item.id}}" catchtap="handlePannelClick">
        <image src="{{item.icon}}" class="i-icon" mode="aspectFit" />
        <view class="i-name">{{item.name}}</view>
      </view>
    </block>
  </view>
  <view wx:if="{{topSwiperSelectIdx === 1}}">
    <view class="recommend-area">
      <swiper-card2
        title="推荐展览"
        list="{{recommendList}}"
        bindClickMore="handleClickMoreReco"
        bindClickItem="handleClickItem"
      ></swiper-card2>
    </view>
    <view class="normal-area">
      <card-group1
        title="常设展览"
        list="{{normalList}}"
        bindClickMore="handleClickMoreLong"
        bindClickItem="handleClickItem"
      ></card-group1>
    </view>
    <view class="future-area">
      <card-group1
        title="展览预告"
        list="{{futureList}}"
        bindClickMore="handleClickMoreFuture"
        bindClickItem="handleClickItem"
      ></card-group1>
    </view>
    <view class="expried-area">
      <card-group1
        title="往期展览"
        list="{{outofdateList}}"
        bindClickMore="handleClickMorePast"
        bindClickItem="handleClickItem"
      ></card-group1>
    </view>
  </view>
  <view wx:if="{{topSwiperSelectIdx === 3}}">
    <view class="water-container">
      <!-- 瀑布流容器 -->
      <view class="waterfall">
        <!-- 左列 -->
        <view class="column">
          <block wx:for="{{leftList}}" wx:key="id">
            <view class="item" style="height: {{item.height}}rpx;" data-idx="{{item.id}}" catchtap="handleClickTreatureItem">
              <image src="{{item.more_image_urls[0]}}" class="img-pic" mode="widthFix" />
              <view class="title">{{item.name}}</view>
              <!-- <view class="content">{{item.description}}</view> -->
              <view class="desc-opendate">
                <view class="txt">{{item.classification}}（{{item.period}}）</view>
                <view class="txt">{{item.exhibition_name}}</view>
              </view>
              <!-- <view class="time">{{item.opendate}}</view> -->
            </view>
          </block>
        </view>
        <!-- 右列 -->
        <view class="column">
          <block wx:for="{{rightList}}" wx:key="id">
            <view class="item" style="height: {{item.height}}rpx;" data-idx="{{item.id}}" catchtap="handleClickTreatureItem">
              <image src="{{item.more_image_urls[0]}}" class="img-pic" mode="widthFix" />
              <view class="title">{{item.name}}</view>
              <view class="desc-opendate">
                <view class="txt">{{item.classification}}（{{item.period}}）</view>
                <view class="txt">{{item.exhibition_name}}</view>
              </view>
            </view>
          </block>
        </view>
      </view>
      <!-- 加载提示 -->
      <view class="loading" wx:if="{{waterfallloading}}">加载中...</view>
      <view class="no-more" wx:if="{{!hasMore && !waterfallloading}}">没有更多数据了</view>
    </view>
  </view>
</view>
</scroll-view>

</page-meta>  